<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Counter Dapp</title>
</head>
<body>
    <div>
      <label for="counter">Counter</label>
      <input disabled type="text" id="counter" />
      <button onclick="increment()" type="button">Increment</button>
      <button onclick="getCounter()" type="button">Get Counter</button>

    </div>

    <script type="module">
        import { ethers } from "https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.min.js";

        const CONTRACT_ABI = [
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_counter",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "getCounter",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "increment",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ];
        const CONTRACT_ADDRESS = '0xf4818967E667474c68bf10b6C7d0ACa8FB1F6FF3'
        let signer;
        let contract;

        const provider =  new ethers.providers.Web3Provider(
          window.ethereum,
          "any"
        );

        provider.send('eth_requestAccounts', []).then(() =>{
          provider.listAccounts().then(accounts => {
            signer = provider.setSigner(accounts[0]);
            contract = new ethers.Contract(
              CONTRACT_ADDRESS,
              CONTRACT_ABI,
              signer
            );
          });
        });

        async function increment(){
          await contract.increment();
        }

        async function getCounter() {
          const counter = await contract.getCounter();

          document.getElementById("counter").value = counter.toString()
          console.log(counter.toString())
        }

      </script>
</body>
</html>

//probar con sepolia